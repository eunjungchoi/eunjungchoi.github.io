---
title: "좋은 코드란 뭘까? leetcode를 풀면서 든 생각"
date: 2020-10-21 08:54:28 -0400
categories: 
---


코드 리뷰를 할 때  어떤 게 더 나은 방식인지 코멘트로 의견을 주고 받으며 코드를 개선해나간다. 신입과 주니어를 지나면서 대체 어떤게 좋은 코드리뷰인지 의문이 많았다. 

문제는 내가 내 코드나 남의 코드를 봤을 때 대체 어떤 게 좋은 코드이고 나쁜 코드인지 분간을 하기가 어려웠다는 것이다. 부정할 수 없이 이것은 지식이 부족해서였다. 

#### Q. 더 나은 코드란 뭘까? 

똑같이 동작을 하는 코드인데도 <strong>동작의 정확도</strong>와 <strong>효율성</strong> 측면에서 더 나은 성능을 보이는 코드가 있다. 이를 leetcode 알고리즘 문제를 풀면서 많이 배웠다. 

일단 코드는 동작해야 하며 다양한 테스트케이스를 통과해야 한다. 테스트케이스의 양이 단순히 많은 것이 아니라 요구사항에 부합하는 케이스들, 특히 경계값들을 잘 검증하는 코드여야 한다. 

그리고 시간복잡도 면에서 평균적으로 빠른 속도를 보여야 하며, 메모리 사용량이 작을수록 좋다. 공간은 비싸다. 


#### Q. 그러면 좋은 코드를 짜려면 어떻게 해야 할까? 
개념과 실천으로 쪼개볼 수 있겠다. 

<hr>

먼저 탑재해야 할 생각들이 있다. 

#### 1. 운영체제의 기본 원리를 이해하는 것 
시간 복잡도나 공간 복잡도는 메모리와 자료구조, 알고리즘의 원리를 이해해야 한다. 이 부분이 핵심인 것 같다. 


#### 2. 해당 언어에서 추구하는 방식을 체화하는 것 
python이라면 pythonic하게 짜자. 예전에는 이 말의 의미를 몰랐다. 처음에는 언어 힙스터(?)들의 부심?이라고 생각한 적도 있다. 
그런데 같은 동작을 구현하는 여러 솔루션 코드를 비교해보면서 느꼈다. 이 언어에서 최대한의 좋은 퍼포먼스를 낼 수 있도록 언어를 만들어나가는 commitee에서 많은 노력을 기울이고 있다는 것을. 그 방식을 적극 활용하자. 

파이썬 내부적으로도 c를 이용해 훨씬 빠르게 구현해놓은 모듈들이 많다. collections.deque 등. 잘 찾아보고 부지런히 가져다 쓰자. 


#### 3. 성능에 대한 고려를 늘 하고 있는 게 좋다. 
성능에 대한 인지는 내 눈과 내 뇌로 뿅하고 파악할 수 있는 게 아니다. 그래서 늘 성능 프로파일러가 필요하다. 
예를 들어 django-debug-toolbar 는 쿼리 속도와 중복 쿼리 등을 파악해서 알려준다. 속도는 중요하다. 효율적인 쿼리를 추구하자. 

grafana(서버, db), flower(celery) 등의 모니터링 툴도 상비하자. 


####  4. 비슷한 성능이라면 짧을수록 좋다. 다만, 가독성도 고려하자. 
one-liner는 이해하기가 힘들다. 동료들 뿐만 아니라, 미래의 나도 바로 이해할 수 있는 코드를 작성하자. 

<hr>

실천의 측면에서는 결국 많은 코드를 보고 짜는 것 밖에 없겠다. 
#### 5. Best practices를 많이 찾아보는 것. 

성공적으로 운영되고 있는 다른 오픈소스 등의 프로젝트들의 코드를 많이 살펴보는 것이 방법이다.


한 가지 추가로 든 생각. 

#### 6. C를 조금 알아야 한다. 

파이썬의 예로 들자면, 파이썬 코드를 잘 짜려면 파이썬 만 알아서는 안 되는 것 같다. 
그 본류를 거슬러 올라가서 공통 조상(?)이랄까, c의 구조를 약간이라도 파악하고 있어야 파이썬이라는 언어를 더 잘 이해할 수 있는 것 같다. 
물론 c는 예시이다. 다른 언어를 하나 더 공부하면 본래 쓰던 언어의 성격을 더 잘 알게 된다. 

 